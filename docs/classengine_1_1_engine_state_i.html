<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pictel 2d: engine::EngineStateI Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pictel 2d<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Game Engine Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>engine</b></li><li class="navelem"><a class="el" href="classengine_1_1_engine_state_i.html">EngineStateI</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classengine_1_1_engine_state_i-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">engine::EngineStateI Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Engine state holder.  
 <a href="classengine_1_1_engine_state_i.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6ecffec88ea092011b4579a2274e4df3"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structengine_1_1_size.html">Size</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classengine_1_1_engine_state_i.html#a6ecffec88ea092011b4579a2274e4df3">GetViewportSize</a> ()=0</td></tr>
<tr class="separator:a6ecffec88ea092011b4579a2274e4df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac22c885149bdf8c038862c7eaafa1e2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classengine_1_1_engine_state_i.html#aac22c885149bdf8c038862c7eaafa1e2">SetViewportSize</a> (<a class="el" href="structengine_1_1_size.html">Size</a>, float)=0</td></tr>
<tr class="separator:aac22c885149bdf8c038862c7eaafa1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93ac3226d96705ffe9e7112cf03705b4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classengine_1_1_engine_state_i.html#a93ac3226d96705ffe9e7112cf03705b4">SetOnScreenSizeChangeHandler</a> (std::function&lt; void(<a class="el" href="structengine_1_1_size.html">Size</a>, float)&gt;)=0</td></tr>
<tr class="separator:a93ac3226d96705ffe9e7112cf03705b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Engine state holder. </p>
<p >Holds various information on the state of the engine. This should be used to setup an observer for the screen size change so that the game has a chance to react and, maybe, change the viewport size.</p>
<p >The default implementation should register for screen size change event via <a class="el" href="classengine_1_1_engine_state_i.html#a93ac3226d96705ffe9e7112cf03705b4">EngineStateI::SetOnScreenSizeChangeHandler</a> and provide the wanted viewport size via <a class="el" href="classengine_1_1_engine_state_i.html#aac22c885149bdf8c038862c7eaafa1e2">EngineStateI::SetViewportSize</a>.</p>
<p >The code below takes the screen size provided in the handler and calcualtes and scale for the game leaving the viewport size unchanged.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> engineState = engine::Globals::engineState()</div>
<div class="line">engineState-&gt;<a class="code hl_function" href="classengine_1_1_engine_state_i.html#a93ac3226d96705ffe9e7112cf03705b4">SetOnScreenSizeChangeHandler</a>([&amp;](engine::Size size, <span class="keywordtype">float</span> density) {</div>
<div class="line">    <span class="comment">// have the wanted size ready somewhere</span></div>
<div class="line">    <a class="code hl_struct" href="structengine_1_1_vector2.html">engine::Vector2</a> wantedSize = { 320, 200 };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// calcualte the scale provided we don&#39;t want to change the viewport size</span></div>
<div class="line">    <span class="keywordtype">float</span> scale = MIN((<span class="keywordtype">float</span>)size.width / wantedSize.x, (<span class="keywordtype">float</span>)size.height / wantedSize.y);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// update the viewport size with the modified scale; this is a pixel-art</span></div>
<div class="line">    <span class="comment">// game so it should scale by using nearest-neighbour</span></div>
<div class="line">    engineState-&gt;SetViewportSize({(int)wantedSize.x, (<span class="keywordtype">int</span>)wantedSize.y}, scale);</div>
<div class="line">});</div>
<div class="ttc" id="aclassengine_1_1_engine_state_i_html_a93ac3226d96705ffe9e7112cf03705b4"><div class="ttname"><a href="classengine_1_1_engine_state_i.html#a93ac3226d96705ffe9e7112cf03705b4">engine::EngineStateI::SetOnScreenSizeChangeHandler</a></div><div class="ttdeci">virtual void SetOnScreenSizeChangeHandler(std::function&lt; void(Size, float)&gt;)=0</div></div>
<div class="ttc" id="astructengine_1_1_vector2_html"><div class="ttname"><a href="structengine_1_1_vector2.html">engine::Vector2</a></div><div class="ttdef"><b>Definition:</b> vector2.hpp:39</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a6ecffec88ea092011b4579a2274e4df3" name="a6ecffec88ea092011b4579a2274e4df3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ecffec88ea092011b4579a2274e4df3">&#9670;&nbsp;</a></span>GetViewportSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="structengine_1_1_size.html">Size</a> engine::EngineStateI::GetViewportSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns the viewport width and height. This is the desired viewport size and controls the size of the framebuffer texture. Is reflects what was set during initialization and what was modified throughout the course of the engine lifcycle. </p>

</div>
</div>
<a id="a93ac3226d96705ffe9e7112cf03705b4" name="a93ac3226d96705ffe9e7112cf03705b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93ac3226d96705ffe9e7112cf03705b4">&#9670;&nbsp;</a></span>SetOnScreenSizeChangeHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void engine::EngineStateI::SetOnScreenSizeChangeHandler </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void(<a class="el" href="structengine_1_1_size.html">Size</a>, float)&gt;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Registers a screen size change. Once the screen size is changed this function will be callsed and the script will have an option to modify the desired viewport. That in turn might recreate the framebuffer texture size.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classengine_1_1_engine_state_i.html#aac22c885149bdf8c038862c7eaafa1e2">EngineStateI::SetViewportSize</a></dd></dl>
<p>The lambda will receive the parameters:</p><ul>
<li>size</li>
<li>screen density </li>
</ul>

</div>
</div>
<a id="aac22c885149bdf8c038862c7eaafa1e2" name="aac22c885149bdf8c038862c7eaafa1e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac22c885149bdf8c038862c7eaafa1e2">&#9670;&nbsp;</a></span>SetViewportSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void engine::EngineStateI::SetViewportSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structengine_1_1_size.html">Size</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Set the viewport &amp; scale. This changes the target framebuffer texture size on the frame. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
